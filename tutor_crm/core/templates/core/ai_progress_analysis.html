{% extends "core/base.html" %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-10 offset-md-1">
            {% if error %}
                <div class="alert alert-danger">
                    <h4>‚ùå –û—à–∏–±–∫–∞ AI</h4>
                    <p>{{ error }}</p>
                    <a href="{% url 'ai_analyze_progress' student.pk %}" class="btn btn-primary">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</a>
                </div>
            {% else %}
                <div class="card">
                    <div class="card-header bg-info text-white">
                        <h3>ü§ñ AI –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</h3>
                        <p class="mb-0">–£—á–µ–Ω–∏–∫: <strong>{{ student.name }}</strong></p>
                    </div>
                    <div class="card-body">
                        <div class="row mb-4">
                            <div class="col-md-12">
                                <h4 class="text-info">üìä –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</h4>
                                <div class="alert alert-info">
                                    {{ analysis.progress_summary }}
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <h5>‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:</h5>
                                <ul class="list-group">
                                    {% for strength in analysis.strengths %}
                                        <li class="list-group-item list-group-item-success">
                                            {{ strength }}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h5>‚ö†Ô∏è –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:</h5>
                                <ul class="list-group">
                                    {% for weakness in analysis.weaknesses %}
                                        <li class="list-group-item list-group-item-warning">
                                            {{ weakness }}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                        
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <h5>üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</h5>
                                <ul class="list-group">
                                    {% for recommendation in analysis.recommendations %}
                                        <li class="list-group-item list-group-item-primary">
                                            {{ recommendation }}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h5>üìö –°–ª–µ–¥—É—é—â–∏–µ —Ç–µ–º—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è:</h5>
                                <ul class="list-group">
                                    {% for topic in analysis.next_topics %}
                                        <li class="list-group-item list-group-item-info">
                                            {{ topic }}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-12">
                                <h5>üéØ –°–æ–≤–µ—Ç—ã –ø–æ –º–æ—Ç–∏–≤–∞—Ü–∏–∏:</h5>
                                <div class="alert alert-success">
                                    <ul class="mb-0">
                                        {% for tip in analysis.motivation_tips %}
                                            <li>{{ tip }}</li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="d-flex justify-content-between mt-4">
                            <div>
                                <a href="{% url 'ai_analyze_progress' student.pk %}" class="btn btn-secondary">
                                    üîÑ –û–±–Ω–æ–≤–∏—Ç—å –∞–Ω–∞–ª–∏–∑
                                </a>
                                <a href="{% url 'student_detail' student.pk %}" class="btn btn-outline-secondary">
                                    ‚Üê –ù–∞–∑–∞–¥ –∫ —É—á–µ–Ω–∏–∫—É
                                </a>
                            </div>
                            <div>
                                <button class="btn btn-primary" onclick="printAnalysis()">
                                    üñ®Ô∏è –†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –æ—Ç—á–µ—Ç
                                </button>
                                <button class="btn btn-success" onclick="exportAnalysis()">
                                    üìÑ –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</div>

<script>
function printAnalysis() {
    window.print();
}

function exportAnalysis() {
    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ PDF
    alert('–§—É–Ω–∫—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
}
</script>

<style>
@media print {
    .btn, .d-flex {
        display: none !important;
    }
    .card {
        border: none !important;
    }
}
</style>
{% endblock %} 